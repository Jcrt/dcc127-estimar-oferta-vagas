<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:opt="http://primefaces.prime.com.tr/optimus"
	xmlns:p="http://primefaces.org/ui">
<ui:composition template="#{perfilController.perfil}">
	<ui:define name="corpo">

		<p:growl autoUpdate="true" />
		<h:form style="padding-left: 45px;padding-bottom: 23%;height: 1640px;"
			id="form" class="formularioCentro">
			<div class="titulo">
				<legend>Visão Geral</legend>
			</div>

			<div class="ui-grid-col-4" style="width: 50%; padding-right: 20px;">
				<p:fieldset legend="Período - Aluno" style="margin-bottom:0px">
					<div class="ui-grid ui-grid-responsive">
						<div class="ui-grid-row ">
							<div class="ui-grid-col-6 "
								style="width: 50%; margin-top: -25px;">
								<p:outputLabel value="Grades:" />
								<p:autoComplete queryDelay="1000"  id="gradesSelecionadas" multiple="true"
									forceSelection="true"
									value="#{visaoGeralController.listagrade}"
									completeMethod="#{visaoGeralController.gradeCodigos}"
									styleClass="gradeSelecionadas">
									<p:ajax event="itemSelect"
										listener="#{visaoGeralController.onItemSelectGrade('0')}"
										update="@form" />
									<p:ajax event="itemUnselect"
										listener="#{visaoGeralController.onItemSelectGrade('0')}"
										update="@form" />
								</p:autoComplete>
								<p:ajaxStatus id="startAjax" onstart="PF('start').show();"
									oncomplete="PF('start').hide();">
								</p:ajaxStatus>
								<p:dialog widgetVar="start" modal="true" draggable="false"
									closable="false" resizable="false" showHeader="false">
									<h:graphicImage value="#{resource['img:carregandoo.gif']}"></h:graphicImage>
								</p:dialog>
							</div>
						</div>
					</div>
					<div class="ui-grid ui-grid-responsive">
						<div class="ui-grid-row ">
							<div class="ui-grid-col-6 "
								style="width: 50%; padding-top: 10px;">
								<p:outputLabel value="Alunos:" />
								<p:autoComplete queryDelay="1000"  id="alunosSelecionadas" multiple="true"
									forceSelection="true"
									value="#{visaoGeralController.listaAlunosSelecionados}"
									completeMethod="#{visaoGeralController.nomeAluno}"
									styleClass="gradeSelecionadas">
									<p:ajax event="itemSelect"
										listener="#{visaoGeralController.onItemSelectGrade('5')}"
										update="@form" />
									<p:ajax event="itemUnselect"
										listener="#{visaoGeralController.onItemSelectGrade('5')}"
										update="@form" />
								</p:autoComplete>
							</div>
						</div>
					</div>
					<div class="ui-grid ui-grid-responsive">
						<div class="ui-grid-row ">
							<div class="ui-grid-col-6 "
								style="width: 50%; padding-top: 10px;">
								<p:outputLabel value="Somente ingresso em:" />
								<p:autoComplete queryDelay="1000"  id="alunosAnoSelecionadas" multiple="true"
									forceSelection="true"
									value="#{visaoGeralController.listaAnosSelecionados}"
									completeMethod="#{visaoGeralController.alunoAno}"
									styleClass="gradeSelecionadasCustom">
									<p:ajax event="itemSelect"
										listener="#{visaoGeralController.onItemSelectGrade('1')}"
										update="@form" />
									<p:ajax event="itemUnselect"
										listener="#{visaoGeralController.onItemSelectGrade('1')}"
										update="@form" />
								</p:autoComplete>
							</div>
							
							<div class="ui-grid-col-6 "
								style="width: 50%; padding-top: 10px;">
								<p:outputLabel value="Desprezar ingresso em:" />
								<p:autoComplete queryDelay="1000"  id="alunosAnoSelecionadasInvertido" multiple="true"
									forceSelection="true"
									value="#{visaoGeralController.listaAnosSelecionadosInvertida}"
									completeMethod="#{visaoGeralController.alunoAno}"
									styleClass="gradeSelecionadasCustom">
									<p:ajax event="itemSelect"
										listener="#{visaoGeralController.onItemSelectGrade('2')}"
										update="@form" />
									<p:ajax event="itemUnselect"
										listener="#{visaoGeralController.onItemSelectGrade('2')}"
										update="@form" />
								</p:autoComplete>
							</div>
							
							
						</div>
					</div>
				</p:fieldset>
			</div>
			<div class="ui-grid-col-4 " style="width: 45%;">
				<p:fieldset legend="Período - Disciplina" style="margin-bottom:20px">
					<div class="ui-grid-col-4" style="width: 33%;">
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsPeriodo}"
									styleClass="discD1"
									disabled="#{visaoGeralController.lgPeriodoUm}"
									id="periodoInicioUm">
									<f:selectItem itemLabel="01" itemValue="01" />
									<f:selectItem itemLabel="02" itemValue="02" />
									<f:selectItem itemLabel="03" itemValue="03" />
									<f:selectItem itemLabel="04" itemValue="04" />
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsPeriodoDois}"
									styleClass="discD2"
									disabled="#{visaoGeralController.lgPeriodoCinco}"
									id="periodoInicioCinco">
									<f:selectItem itemLabel="05" itemValue="05" />
									<f:selectItem itemLabel="06" itemValue="06" />
									<f:selectItem itemLabel="07" itemValue="07" />
									<f:selectItem itemLabel="08" itemValue="08" />
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsPeriodoTres}"
									styleClass="discD3"
									disabled="#{visaoGeralController.lgPeriodoNove}"
									id="periodoInicioNove">
									<f:selectItem itemLabel="09" itemValue="09" />
									<f:selectItem itemLabel="10" itemValue="10" />
									<f:selectItem itemLabel="11" itemValue="11" />
									<f:selectItem itemLabel="12" itemValue="12" />
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsEletiva}"
									styleClass="disc2"
									disabled="#{visaoGeralController.lgEletivas}"
									id="botaoEletivas">
									<f:selectItem itemLabel="Eletivas" itemValue="Eletivas" />
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row "></div>
						</div>
					</div>
					<div class="ui-grid-col-4" style="width: 33%;">
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsSituacao}"
									styleClass="disc5">
									<f:selectItem itemLabel="Aprovado" itemValue="#0B2161" />
									<f:selectItem itemLabel="Repr. nota" itemValue="#FFA500" />
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsSituacaoDois}"
									styleClass="disc6">
									<f:selectItem itemLabel="Habilitado" itemValue="#04B431" />
									<f:selectItem itemLabel="Matriculado" itemValue="#7777FF" />
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton
									value="#{visaoGeralController.selectedOptionsSituacaoTres}"
									styleClass="disc7">
									<f:selectItem itemLabel="Repr. freq" itemValue="#FF0000" />
									<f:selectItem itemLabel="Inabilitado" itemValue="#FFFFFF" />

									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row ">
								<p:selectManyButton id="Many"
									value="#{visaoGeralController.selectedOptionsSituacaoQuatro}"
									styleClass="disc9" style="    font-size: 12px;">
									<f:selectItem itemLabel="Quase habilit." itemValue="#FA00FF">
									</f:selectItem>
									<p:ajax listener="#{visaoGeralController.onItemSelect()}"
										update="@form"></p:ajax>
								</p:selectManyButton>
							</div>
						</div>
						<div class="ui-grid ui-grid-responsive">
							<div class="ui-grid-row "></div>
						</div>
					</div>
					<div class="ui-grid-col-4" style="width: 33%;">
						<p:outputLabel value="Disciplinas Avulsas:"></p:outputLabel>
						<p:autoComplete queryDelay="1000"  id="disciplinasSelecionadas" multiple="true"
							forceSelection="true"
							value="#{visaoGeralController.listaTodasDisciplinasSelecionadas}"
							completeMethod="#{visaoGeralController.nomeDisciplina}"
							styleClass="auto">
							<p:ajax event="itemSelect"
								listener="#{visaoGeralController.onItemSelect()}" update="@form" />
							<p:ajax event="itemUnselect"
								listener="#{visaoGeralController.onItemSelect()}" update="@form" />
						</p:autoComplete>
					</div>

				</p:fieldset>
			</div>
			
			<div class="gridTamanho espacoLinha">
				<div class="ui-grid-col-12 espacoLinha ">
					<div class="ui-grid ui-grid-responsive">
						<p:dataTable id="discplinas" var="gradehistorico" paginator="true"
							rows="40" scrollable="true" scrollWidth="100%"
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
							paginatorAlwaysVisible="false"
							value="#{visaoGeralController.listaGradeHistorico}"
							rendered="#{visaoGeralController.ldGridHistorico}"
							emptyMessage="Nenhum registro encontrado!"	>
							<p:column
								style="width:130px;font-size: 12px;   padding: 0px 0px; "
								sortBy="#{gradehistorico.matricula}">
								<f:facet name="header">
									<div>Matricula</div>
								</f:facet>
								<h:outputLink id="fade" value="#">
									#{gradehistorico.matricula}
								</h:outputLink>
								<p:tooltip id="toolTipFade" for="fade"
									style="    font-size: 12px;"
									value="#{gradehistorico.opcionaisSituacaoDisciplina}" />
							</p:column>
							<p:column
								style="width:400px;font-size: 12px;   padding: 0px 0px; "
								sortBy="#{gradehistorico.nome}">
								<f:facet name="header">
									<div>Nome</div>
								</f:facet>
								#{gradehistorico.nome}								
								</p:column>
							<p:columns value="#{visaoGeralController.columns}" var="column"
								style=" padding: 0px 0px;    font-size: 12px;width: 25px; ">
								<f:facet name="header">
									<div class="rotate90" style="#{column.cor}">
										<div>
											<h:outputText value="#{column.header}" />
										</div>
									</div>
								</f:facet>
								<div
									style="height: 12px; width: 51px;background-color: #{column.retornaProperty(gradehistorico)};" />
							</p:columns>
						</p:dataTable>
					</div>
				</div>
			</div>

			<div class="gridTamanho espacoLinha">
				<div class="ui-grid-col-12 espacoLinha ">
					<div class="ui-grid ui-grid-responsive">

						<div class="ui-grid-col-2"
							style="font-size: 12px; margin-top: 14px;">
							<p:selectManyButton
								value="#{visaoGeralController.selectedOptionsEstimativa}"
								styleClass="discD10"
								rendered="#{visaoGeralController.ldGridHistorico}"
								id="brutoEstimativa">
								<f:selectItem itemLabel="Bruto" itemValue="B" escape="false" />
								<f:selectItem itemLabel="/" itemValue="X" itemDisabled="true" />
								<f:selectItem itemLabel="Estimado " itemValue="E" />
								<p:ajax
									listener="#{visaoGeralController.onItemSelectEstimativa()}"
									update="estimativas"></p:ajax>
							</p:selectManyButton>
						</div>
						<div class="ui-grid-col-2" style="font-size: 12px;">
							<p:outputLabel value="% reprovacao:"
								rendered="#{visaoGeralController.ldGridHistorico}" />
							<p:inputText value="#{visaoGeralController.percNrMatriculados}"
								rendered="#{visaoGeralController.ldGridHistorico}">
								<p:ajax event="change"
									listener="#{visaoGeralController.calculaPercentual()}"
									update="estimativas" />
							</p:inputText>
						</div>
						<div class="ui-grid-col-2" style="font-size: 12px;">
							<p:outputLabel value=" % podem cursar:"
								rendered="#{visaoGeralController.ldGridHistorico}" />
							<p:inputText value="#{visaoGeralController.percNrH}"
								rendered="#{visaoGeralController.ldGridHistorico}">
								<p:ajax event="change"
									listener="#{visaoGeralController.calculaPercentual()}"
									update="estimativas" />
							</p:inputText>
						</div>
						<div class="ui-grid-col-2" style="font-size: 12px;">
							<p:outputLabel value="% aprovar nos prerequisitos:"
								rendered="#{visaoGeralController.ldGridHistorico}" />
							<p:inputText value="#{visaoGeralController.percNrQH}"
								rendered="#{visaoGeralController.ldGridHistorico}">
								<p:ajax event="change"
									listener="#{visaoGeralController.calculaPercentual()}"
									update="estimativas" />
							</p:inputText>
						</div>
						<div class="ui-grid-col-2" style="font-size: 12px;">
							<p:outputLabel value="% reprovado frequencia:"
								rendered="#{visaoGeralController.ldGridHistorico}" />
							<p:inputText value="#{visaoGeralController.percNrRF}"
								rendered="#{visaoGeralController.ldGridHistorico}">
								<p:ajax event="change"
									listener="#{visaoGeralController.calculaPercentual()}"
									update="estimativas" />
							</p:inputText>
						</div>
						<div class="ui-grid-col-2" style="font-size: 12px;">
							<p:outputLabel value="% reprovados por nota:"
								rendered="#{visaoGeralController.ldGridHistorico}" />
							<p:inputText value="#{visaoGeralController.percNrRN}"
								rendered="#{visaoGeralController.ldGridHistorico}">
								<p:ajax event="change"
									listener="#{visaoGeralController.calculaPercentual()}"
									update="estimativas" />
							</p:inputText>
						</div>
					</div>
				</div>
			</div>

			<div class="gridTamanho espacoLinha">
				<div class="ui-grid-col-12 espacoLinha ">
					<div class="ui-grid ui-grid-responsive">
						<p:dataTable id="estimativas" var="estimativa"
							value="#{visaoGeralController.listaEspectativaDisciplina}"
							filteredValue="#{visaoGeralController.listaEspectativaDisciplinaSelecionada}"
							rendered="#{visaoGeralController.ldGridHistorico}"
							paginator="true" rows="30"
							paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
							paginatorAlwaysVisible="false">
							emptyMessage="Nenhum registro encontrado!">
							<f:facet name="header">
			           Estimativa para Pedido Disciplinas			           
			          			 <h:commandLink>
									<p:graphicImage name="/img/excel.png"
										style="float: right;" />
									<p:dataExporter type="xls" target="estimativas"
										fileName="visaoGeral" />
								</h:commandLink>
							</f:facet>
							<p:column headerText="Disciplinas"
								style="width: 20%;padding: 0px 10px;"
								filterBy="#{estimativa.nomeDisciplina}"
								filterMatchMode="contains" sortBy="#{estimativa.nomeDisciplina}">
								<h:outputText value="#{estimativa.nomeDisciplina}" />
							</p:column>
							<p:column headerText="Matriculados"
								style="width: 20%;padding: 0px 10px;text-align: center;">

								<h:outputText value="#{estimativa.nrMatriculados}"
									rendered="#{visaoGeralController.lgPlanejado}" />
								<h:outputText value=" / "
									rendered="#{visaoGeralController.lgBarra}" />
								<h:outputText value="#{estimativa.percNrMatriculados}"
									rendered="#{visaoGeralController.lgEstimativa}" />
							</p:column>
							<p:column headerText="Habilitados"
								style="width: 20%;padding: 0px 10px;text-align: center;">
								<h:outputText value="#{estimativa.nrH}"
									rendered="#{visaoGeralController.lgPlanejado}" />
								<h:outputText value=" / "
									rendered="#{visaoGeralController.lgBarra}" />
								<h:outputText value="#{estimativa.percNrH}"
									rendered="#{visaoGeralController.lgEstimativa}" />
							</p:column>
							<p:column headerText="Quase habilitados"
								style="width: 20%;padding: 0px 10px;text-align: center;">
								<h:outputText value="#{estimativa.nrQH}"
									rendered="#{visaoGeralController.lgPlanejado}" />
								<h:outputText value=" / "
									rendered="#{visaoGeralController.lgBarra}" />
								<h:outputText value="#{estimativa.percNrQH}"
									rendered="#{visaoGeralController.lgEstimativa}" />
							</p:column>
							<p:column headerText="Repr. frequencia"
								style="width: 20%;padding: 0px 10px;text-align: center;">

								<h:outputText value="#{estimativa.nrRF}"
									rendered="#{visaoGeralController.lgPlanejado}" />
								<h:outputText value=" / "
									rendered="#{visaoGeralController.lgBarra}" />
								<h:outputText value="#{estimativa.percNrRF}"
									rendered="#{visaoGeralController.lgEstimativa}" />
							</p:column>
							<p:column headerText="Repr. nota"
								style="width: 20%;padding: 0px 10px;text-align: center;">
								<h:outputText value="#{estimativa.nrRN}"
									rendered="#{visaoGeralController.lgPlanejado}" />
								<h:outputText value=" / "
									rendered="#{visaoGeralController.lgBarra}" />
								<h:outputText value="#{estimativa.percNrRN}"
									rendered="#{visaoGeralController.lgEstimativa}" />
							</p:column>
							<p:column headerText="Necessidade"
								style="width: 20%;padding: 0px 10px;text-align: center;">
								<h:outputText value="#{estimativa.nrTotal}"
									rendered="#{visaoGeralController.lgPlanejado}" />
								<h:outputText value=" / "
									rendered="#{visaoGeralController.lgBarra}" />
								<h:outputText value="#{estimativa.percNrTotal}"
									rendered="#{visaoGeralController.lgEstimativa}" />
							</p:column>
						</p:dataTable>
					</div>
				</div>
			</div>
		</h:form>
		<style type="text/css">
			.ui-state-active {
				background-color: #b3b3b3 !important;
			}
		</style>
	</ui:define>
</ui:composition>
</html>